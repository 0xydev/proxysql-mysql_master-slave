[mysqld]
# docker'a command olarak parametre şeklinde alacak
server_id=1

# GTID (Global Transaction ID) modunu aktif eder
gtid_mode=ON

# GTID tutarlılığını zorunlu kılar
enforce_gtid_consistency=ON

# Master bilgilerini tabloda saklar (dosya yerine)
master_info_repository=TABLE

# Relay log bilgilerini tabloda saklar (dosya yerine)
relay_log_info_repository=TABLE

# Multi-master için relay log ayarları
relay_log=mysql-relay-bin
relay_log_index=mysql-relay-bin.index
log_slave_updates=ON

# Transaction write setleri için hash algoritmasını belirler
transaction_write_set_extraction=XXHASH64

# ========== Group Replication Ayarları ==========
# Group Replication için benzersiz grup ID'si
loose_group_replication_group_name="aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"

# Sunucu başlangıcında Group Replication'ı otomatik başlatmaz
loose_group_replication_start_on_boot=OFF

# İlk sunucunun grup bootstrap'ını yapmasını sağlar
loose_group_replication_bootstrap_group=OFF

# Multi-master mod için single primary modu kapatır
loose_group_replication_single_primary_mode=OFF

# Tüm nodların write yapabilmesini sağlar
loose_group_replication_enforce_update_everywhere_checks=ON

# Bu sunucunun group replication için dinleyeceği adres
loose_group_replication_local_address= "master1:33061"

# Gruptaki diğer sunucuların adresleri
loose_group_replication_group_seeds= "master1:33061,master2:33061,master3:33061"

# Group replication için IP whitelist
loose_group_replication_ip_whitelist="0.0.0.0/0"

# ========== Binlog Ayarları ==========
log_bin=mysql_bin
binlog_checksum=NONE
binlog_format=ROW

# Auto increment değerlerinin artış miktarı (node sayısı kadar)
auto_increment_increment=3

# Bu sunucu için auto increment başlangıç offseti
auto_increment_offset=1

# ====== Ağ Ayarları ==========
bind-address=0.0.0.0
socket=/var/run/mysqld/mysqld.sock

# Report host ayarı (container adı)
report_host=master1

# Group Replication port
port=3306

# ======  Diğer Ayarlar ==========
# Read-only modu kapatır
super_read_only=OFF